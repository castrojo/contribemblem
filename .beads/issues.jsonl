{"id":"contribemblem-0hq","title":"IMAGE-02: Prominent Power Level display","description":"Power Level (sum of all 5 metrics) displayed prominently on image. Top-right corner position, Destiny exotic gold (#F4D03F), 72px font size. Power Level = commits + PRs + issues + reviews + stars.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:56:54.568289258-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:27:15.601103967-05:00","closed_at":"2026-02-06T22:27:15.601103967-05:00","close_reason":"Superseded by GO-05 (contribemblem-20q) which incorporates all IMAGE requirements"}
{"id":"contribemblem-128","title":"GO-02: Port GitHub stats fetcher (fetch-stats.sh + process-stats.sh)","description":"Port scripts/fetch-stats.sh + scripts/process-stats.sh to internal/github/stats.go\n\n## Bash script behavior to replicate:\n- fetch-stats.sh: GraphQL query to GitHub API with UTC year boundaries\n- process-stats.sh: Transform GraphQL response to simplified JSON\n- Combined output: stats.json with 5 metrics (commits, PRs, issues, reviews, stars)\n\n## Files to create:\n- internal/github/stats.go\n- internal/github/stats_test.go\n\n## internal/github/stats.go structure:\n\n```go\npackage github\n\nimport (\n\t\"bytes\"\n\t\"encoding/json\"\n\t\"fmt\"\n\t\"io\"\n\t\"net/http\"\n\t\"os\"\n\t\"time\"\n)\n\n// Stats represents GitHub contribution statistics\ntype Stats struct {\n\tYear          int       `json:\"year\"`\n\tUpdatedAt     string    `json:\"updated_at\"`\n\tCommits       int       `json:\"commits\"`\n\tPullRequests  int       `json:\"pull_requests\"`\n\tIssues        int       `json:\"issues\"`\n\tReviews       int       `json:\"reviews\"`\n\tStarsReceived int       `json:\"stars_received\"`\n}\n\n// GraphQL response structures (nested for JSON unmarshaling)\ntype graphQLResponse struct {\n\tData struct {\n\t\tUser struct {\n\t\t\tContributionsCollection struct {\n\t\t\t\tTotalCommitContributions       int `json:\"totalCommitContributions\"`\n\t\t\t\tTotalPullRequestContributions  int `json:\"totalPullRequestContributions\"`\n\t\t\t\tTotalIssueContributions        int `json:\"totalIssueContributions\"`\n\t\t\t\tTotalPullRequestReviewContributions int `json:\"totalPullRequestReviewContributions\"`\n\t\t\t} `json:\"contributionsCollection\"`\n\t\t\tRepositories struct {\n\t\t\t\tNodes []struct {\n\t\t\t\t\tStargazerCount int `json:\"stargazerCount\"`\n\t\t\t\t} `json:\"nodes\"`\n\t\t\t} `json:\"repositories\"`\n\t\t} `json:\"user\"`\n\t} `json:\"data\"`\n}\n\n// FetchStats queries GitHub GraphQL API for user contribution stats\n// Requires GITHUB_TOKEN and GITHUB_ACTOR env vars\nfunc FetchStats() (*Stats, error) {\n\ttoken := os.Getenv(\"GITHUB_TOKEN\")\n\tif token == \"\" {\n\t\treturn nil, fmt.Errorf(\"GITHUB_TOKEN environment variable not set\")\n\t}\n\t\n\tusername := os.Getenv(\"GITHUB_ACTOR\")\n\tif username == \"\" {\n\t\treturn nil, fmt.Errorf(\"GITHUB_ACTOR environment variable not set\")\n\t}\n\n\t// Calculate current year boundaries in UTC (matches GitHub's contribution logic)\n\tnow := time.Now().UTC()\n\tcurrentYear := now.Year()\n\tyearStart := fmt.Sprintf(\"%d-01-01T00:00:00Z\", currentYear)\n\tyearEnd := fmt.Sprintf(\"%d-12-31T23:59:59Z\", currentYear)\n\n\t// Build GraphQL query\n\tquery := map[string]interface{}{\n\t\t\"query\": \"query($username: String!, $from: DateTime!, $to: DateTime!) { user(login: $username) { contributionsCollection(from: $from, to: $to) { totalCommitContributions totalPullRequestContributions totalIssueContributions totalPullRequestReviewContributions } repositories(ownerAffiliations: OWNER, first: 100) { nodes { stargazerCount } } } }\",\n\t\t\"variables\": map[string]string{\n\t\t\t\"username\": username,\n\t\t\t\"from\":     yearStart,\n\t\t\t\"to\":       yearEnd,\n\t\t},\n\t}\n\n\tbody, err := json.Marshal(query)\n\tif err != nil {\n\t\treturn nil, fmt.Errorf(\"failed to marshal query: %w\", err)\n\t}\n\n\t// Execute GraphQL request\n\treq, err := http.NewRequest(\"POST\", \"https://api.github.com/graphql\", bytes.NewReader(body))\n\tif err != nil {\n\t\treturn nil, fmt.Errorf(\"failed to create request: %w\", err)\n\t}\n\n\treq.Header.Set(\"Authorization\", \"bearer \"+token)\n\treq.Header.Set(\"Content-Type\", \"application/json\")\n\n\tclient := \u0026http.Client{Timeout: 30 * time.Second}\n\tresp, err := client.Do(req)\n\tif err != nil {\n\t\treturn nil, fmt.Errorf(\"GraphQL request failed: %w\", err)\n\t}\n\tdefer resp.Body.Close()\n\n\t// Log rate limit (non-blocking)\n\tif remaining := resp.Header.Get(\"X-Ratelimit-Remaining\"); remaining != \"\" {\n\t\tfmt.Fprintf(os.Stderr, \"Rate limit remaining: %s\\n\", remaining)\n\t}\n\n\tif resp.StatusCode != http.StatusOK {\n\t\treturn nil, fmt.Errorf(\"GraphQL request returned status %d\", resp.StatusCode)\n\t}\n\n\t// Parse response\n\trespBody, err := io.ReadAll(resp.Body)\n\tif err != nil {\n\t\treturn nil, fmt.Errorf(\"failed to read response: %w\", err)\n\t}\n\n\tvar gqlResp graphQLResponse\n\tif err := json.Unmarshal(respBody, \u0026gqlResp); err != nil {\n\t\treturn nil, fmt.Errorf(\"failed to parse response: %w\", err)\n\t}\n\n\t// Sum stars from all repositories\n\ttotalStars := 0\n\tfor _, repo := range gqlResp.Data.User.Repositories.Nodes {\n\t\ttotalStars += repo.StargazerCount\n\t}\n\n\t// Transform to Stats struct (equivalent to process-stats.sh)\n\tstats := \u0026Stats{\n\t\tYear:          currentYear,\n\t\tUpdatedAt:     now.Format(\"2006-01-02T15:04:05Z\"),\n\t\tCommits:       gqlResp.Data.User.ContributionsCollection.TotalCommitContributions,\n\t\tPullRequests:  gqlResp.Data.User.ContributionsCollection.TotalPullRequestContributions,\n\t\tIssues:        gqlResp.Data.User.ContributionsCollection.TotalIssueContributions,\n\t\tReviews:       gqlResp.Data.User.ContributionsCollection.TotalPullRequestReviewContributions,\n\t\tStarsReceived: totalStars,\n\t}\n\n\treturn stats, nil\n}\n```\n\n## internal/github/stats_test.go structure:\n\n```go\npackage github\n\nimport (\n\t\"encoding/json\"\n\t\"net/http\"\n\t\"net/http/httptest\"\n\t\"os\"\n\t\"testing\"\n)\n\nfunc TestFetchStats(t *testing.T) {\n\t// Mock GitHub GraphQL API\n\tserver := httptest.NewServer(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n\t\tif r.Method != \"POST\" {\n\t\t\tt.Errorf(\"Expected POST request, got %s\", r.Method)\n\t\t}\n\t\tif r.Header.Get(\"Authorization\") != \"bearer test-token\" {\n\t\t\tt.Errorf(\"Expected Authorization header with test-token\")\n\t\t}\n\n\t\t// Return mock GraphQL response\n\t\tresponse := `{\"data\":{\"user\":{\"contributionsCollection\":{\"totalCommitContributions\":150,\"totalPullRequestContributions\":25,\"totalIssueContributions\":10,\"totalPullRequestReviewContributions\":30},\"repositories\":{\"nodes\":[{\"stargazerCount\":50},{\"stargazerCount\":100}]}}}}`\n\t\tw.Header().Set(\"X-Ratelimit-Remaining\", \"4999\")\n\t\tw.Write([]byte(response))\n\t}))\n\tdefer server.Close()\n\n\t// Override API endpoint for testing (needs code modification to accept URL parameter)\n\t// For now, test will use real endpoint - TODO: refactor to accept endpoint URL\n\n\tos.Setenv(\"GITHUB_TOKEN\", \"test-token\")\n\tos.Setenv(\"GITHUB_ACTOR\", \"testuser\")\n\tdefer os.Unsetenv(\"GITHUB_TOKEN\")\n\tdefer os.Unsetenv(\"GITHUB_ACTOR\")\n\n\t// Test requires network access or endpoint injection\n\t// This is a placeholder - implement endpoint injection in stats.go for full testing\n\tt.Skip(\"Requires endpoint injection or network access\")\n}\n\nfunc TestStatsJSONMarshaling(t *testing.T) {\n\tstats := \u0026Stats{\n\t\tYear:          2026,\n\t\tUpdatedAt:     \"2026-02-06T22:00:00Z\",\n\t\tCommits:       150,\n\t\tPullRequests:  25,\n\t\tIssues:        10,\n\t\tReviews:       30,\n\t\tStarsReceived: 150,\n\t}\n\n\tdata, err := json.Marshal(stats)\n\tif err != nil {\n\t\tt.Fatalf(\"Failed to marshal stats: %v\", err)\n\t}\n\n\tvar unmarshaled Stats\n\tif err := json.Unmarshal(data, \u0026unmarshaled); err != nil {\n\t\tt.Fatalf(\"Failed to unmarshal stats: %v\", err)\n\t}\n\n\tif unmarshaled.Commits != stats.Commits {\n\t\tt.Errorf(\"Expected Commits=%d, got %d\", stats.Commits, unmarshaled.Commits)\n\t}\n}\n```\n\n## Verification:\n```bash\ngo test -v ./internal/github/\nexport GITHUB_TOKEN=$YOUR_TOKEN\nexport GITHUB_ACTOR=$YOUR_USERNAME\ngo run cmd/contribemblem/main.go fetch-stats  # Should work after updating main.go\n```\n\n## Update cmd/contribemblem/main.go:\nReplace fetch-stats case with:\n```go\ncase \"fetch-stats\":\n\tstats, err := github.FetchStats()\n\tif err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Error: %v\\n\", err)\n\t\tos.Exit(1)\n\t}\n\tdata, _ := json.MarshalIndent(stats, \"\", \"  \")\n\tfmt.Println(string(data))\n```\n\nAdd import: \"github.com/castrojo/contribemblem/internal/github\"\n\n## Depends on: GO-01","status":"in_progress","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T22:18:28.263015086-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:49:45.925652862-05:00","dependencies":[{"issue_id":"contribemblem-128","depends_on_id":"contribemblem-s4f","type":"blocks","created_at":"2026-02-06T22:20:42.390522122-05:00","created_by":"Jorge O. Castro"},{"issue_id":"contribemblem-128","depends_on_id":"contribemblem-r50","type":"blocks","created_at":"2026-02-06T22:20:43.329890202-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-20q","title":"GO-05: Implement badge image generation (NEW functionality)","description":"NEW FEATURE: Generate 800x400px PNG badge with Destiny-styled stat overlay. This replaces the planned Node.js generate-badge.js (never implemented).\n\n## Requirements (from IMAGE-01 through IMAGE-06):\n- 800x400px PNG output (IMAGE-05)\n- Emblem background fills entire canvas (IMAGE-01)\n- Power Level (sum of 5 metrics) prominently displayed top-right (IMAGE-02)\n  - 72px Rajdhani Bold font\n  - Destiny exotic gold color: #F4D03F\n- Individual stats with icons in horizontal row at bottom (IMAGE-03)\n  - Commits (‚óè), PRs (‚óÜ), Issues (‚ñ†), Reviews (‚ñ≤), Stars (‚òÖ)\n  - K/M number formatting for large values (1200 ‚Üí \"1.2K\", 1500000 ‚Üí \"1.5M\")\n- Multi-layer text rendering for contrast (IMAGE-04)\n  - Layer 1: Shadow/glow (black, offset +2px x/y, alpha 0.8)\n  - Layer 2: Stroke/outline (black, 4px width)\n  - Layer 3: Fill (main color)\n  - CRITICAL: Must be implemented from start\n- Output to badge.png (overwrites previous) (IMAGE-06)\n\n## Files to create:\n- internal/badge/generator.go (main generation logic)\n- internal/badge/text.go (multi-layer text rendering)\n- internal/badge/format.go (K/M number formatting)\n- internal/badge/generator_test.go\n- internal/badge/text_test.go\n- internal/badge/format_test.go\n\n## Font embedding:\nUse go:embed to embed scripts/assets/fonts/Rajdhani-Bold.ttf:\n```go\n//go:embed assets/fonts/Rajdhani-Bold.ttf\nvar rajdhaniFontData []byte\n```\nMove font to internal/badge/assets/fonts/ or reference via relative path.\n\n## Image generation approach:\n- Load emblem JPEG from data/emblem.jpg using image.Decode()\n- Scale to 800x400 using golang.org/x/image/draw.BiLinear\n- Create RGBA canvas 800x400\n- Draw scaled emblem as background\n- Load Rajdhani-Bold.ttf using golang.org/x/image/font/opentype\n- Render Power Level text (top-right, 100px from right, 80px from top)\n- Render stat row (bottom, 50px from bottom, evenly spaced)\n- Save as PNG to badge.png using png.Encode()\n\n## internal/badge/generator.go structure:\n\n```go\npackage badge\n\nimport (\n\t_ \"embed\"\n\t\"fmt\"\n\t\"image\"\n\t\"image/color\"\n\t\"image/draw\"\n\t_ \"image/jpeg\"\n\t\"image/png\"\n\t\"os\"\n\n\t\"golang.org/x/image/font\"\n\t\"golang.org/x/image/font/opentype\"\n\t\"golang.org/x/image/math/fixed\"\n\txdraw \"golang.org/x/image/draw\"\n)\n\n//go:embed assets/fonts/Rajdhani-Bold.ttf\nvar rajdhaniFontData []byte\n\nconst (\n\tWidth  = 800\n\tHeight = 400\n)\n\nvar (\n\t// Destiny exotic gold\n\tPowerLevelColor = color.RGBA{244, 208, 63, 255} // #F4D03F\n\tWhiteColor      = color.RGBA{255, 255, 255, 255}\n\tBlackColor      = color.RGBA{0, 0, 0, 255}\n\tShadowColor     = color.RGBA{0, 0, 0, 204} // alpha 0.8\n)\n\n// Stats for badge generation\ntype Stats struct {\n\tCommits      int\n\tPullRequests int\n\tIssues       int\n\tReviews      int\n\tStars        int\n}\n\n// Generate creates badge image from emblem and stats\n// emblemPath: path to emblem JPEG (data/emblem.jpg)\n// stats: GitHub contribution stats\n// outputPath: where to save badge PNG (badge.png)\nfunc Generate(emblemPath string, stats *Stats, outputPath string) error {\n\t// Load emblem image\n\temblemImg, err := loadImage(emblemPath)\n\tif err != nil {\n\t\treturn fmt.Errorf(\"failed to load emblem: %w\", err)\n\t}\n\n\t// Create canvas\n\tcanvas := image.NewRGBA(image.Rect(0, 0, Width, Height))\n\n\t// Scale and draw emblem as background\n\txdraw.BiLinear.Scale(canvas, canvas.Bounds(), emblemImg, emblemImg.Bounds(), xdraw.Over, nil)\n\n\t// Load font\n\tface72, face32, err := loadFonts()\n\tif err != nil {\n\t\treturn fmt.Errorf(\"failed to load fonts: %w\", err)\n\t}\n\n\t// Calculate Power Level\n\tpowerLevel := stats.Commits + stats.PullRequests + stats.Issues + stats.Reviews + stats.Stars\n\n\t// Render Power Level (top-right)\n\tpowerText := fmt.Sprintf(\"%d\", powerLevel)\n\tDrawTextWithOutline(canvas, powerText, 700, 80, face72, PowerLevelColor)\n\n\t// Render individual stats (bottom row)\n\tstatIcons := []string{\"‚óè\", \"‚óÜ\", \"‚ñ†\", \"‚ñ≤\", \"‚òÖ\"}\n\tstatValues := []int{stats.Commits, stats.PullRequests, stats.Issues, stats.Reviews, stats.Stars}\n\txOffset := 50\n\tspacing := 140\n\n\tfor i := 0; i \u003c 5; i++ {\n\t\ttext := fmt.Sprintf(\"%s %s\", statIcons[i], FormatNumber(statValues[i]))\n\t\tDrawTextWithOutline(canvas, text, xOffset, 350, face32, WhiteColor)\n\t\txOffset += spacing\n\t}\n\n\t// Save PNG\n\treturn savePNG(canvas, outputPath)\n}\n\nfunc loadImage(path string) (image.Image, error) {\n\tf, err := os.Open(path)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tdefer f.Close()\n\n\timg, _, err := image.Decode(f)\n\treturn img, err\n}\n\nfunc loadFonts() (font.Face, font.Face, error) {\n\tttf, err := opentype.Parse(rajdhaniFontData)\n\tif err != nil {\n\t\treturn nil, nil, err\n\t}\n\n\tface72, err := opentype.NewFace(ttf, \u0026opentype.FaceOptions{\n\t\tSize:    72,\n\t\tDPI:     72,\n\t\tHinting: font.HintingFull,\n\t})\n\tif err != nil {\n\t\treturn nil, nil, err\n\t}\n\n\tface32, err := opentype.NewFace(ttf, \u0026opentype.FaceOptions{\n\t\tSize:    32,\n\t\tDPI:     72,\n\t\tHinting: font.HintingFull,\n\t})\n\tif err != nil {\n\t\treturn nil, nil, err\n\t}\n\n\treturn face72, face32, nil\n}\n\nfunc savePNG(img image.Image, path string) error {\n\tf, err := os.Create(path)\n\tif err != nil {\n\t\treturn err\n\t}\n\tdefer f.Close()\n\n\treturn png.Encode(f, img)\n}\n```\n\n## internal/badge/text.go structure:\n\n```go\npackage badge\n\nimport (\n\t\"image\"\n\t\"image/color\"\n\t\"image/draw\"\n\n\t\"golang.org/x/image/font\"\n\t\"golang.org/x/image/math/fixed\"\n)\n\n// DrawTextWithOutline renders multi-layer text (shadow ‚Üí stroke ‚Üí fill)\n// Implements IMAGE-04 requirement for contrast on variable backgrounds\nfunc DrawTextWithOutline(dst draw.Image, text string, x, y int, face font.Face, fillColor color.Color) {\n\tpoint := fixed.Point26_6{\n\t\tX: fixed.I(x),\n\t\tY: fixed.I(y),\n\t}\n\n\t// Layer 1: Shadow (offset +2px x/y, black with alpha 0.8)\n\tshadowOffsets := []struct{ dx, dy int }{\n\t\t{2, 2}, {3, 3},\n\t}\n\tfor _, offset := range shadowOffsets {\n\t\tshadowPoint := fixed.Point26_6{\n\t\t\tX: point.X + fixed.I(offset.dx),\n\t\t\tY: point.Y + fixed.I(offset.dy),\n\t\t}\n\t\tdrawer := \u0026font.Drawer{\n\t\t\tDst:  dst,\n\t\t\tSrc:  image.NewUniform(ShadowColor),\n\t\t\tFace: face,\n\t\t\tDot:  shadowPoint,\n\t\t}\n\t\tdrawer.DrawString(text)\n\t}\n\n\t// Layer 2: Stroke (multi-offset technique, 4px effective width)\n\tstrokeOffsets := []struct{ dx, dy int }{\n\t\t{-2, -2}, {-2, -1}, {-2, 0}, {-2, 1}, {-2, 2},\n\t\t{-1, -2}, {-1, 2},\n\t\t{0, -2}, {0, 2},\n\t\t{1, -2}, {1, 2},\n\t\t{2, -2}, {2, -1}, {2, 0}, {2, 1}, {2, 2},\n\t}\n\tfor _, offset := range strokeOffsets {\n\t\tstrokePoint := fixed.Point26_6{\n\t\t\tX: point.X + fixed.I(offset.dx),\n\t\t\tY: point.Y + fixed.I(offset.dy),\n\t\t}\n\t\tdrawer := \u0026font.Drawer{\n\t\t\tDst:  dst,\n\t\t\tSrc:  image.NewUniform(BlackColor),\n\t\t\tFace: face,\n\t\t\tDot:  strokePoint,\n\t\t}\n\t\tdrawer.DrawString(text)\n\t}\n\n\t// Layer 3: Fill (main text color)\n\tdrawer := \u0026font.Drawer{\n\t\tDst:  dst,\n\t\tSrc:  image.NewUniform(fillColor),\n\t\tFace: face,\n\t\tDot:  point,\n\t}\n\tdrawer.DrawString(text)\n}\n```\n\n## internal/badge/format.go structure:\n\n```go\npackage badge\n\nimport \"fmt\"\n\n// FormatNumber formats large numbers with K/M suffixes\n// 1200 ‚Üí \"1.2K\", 1500000 ‚Üí \"1.5M\"\nfunc FormatNumber(n int) string {\n\tif n \u003e= 1000000 {\n\t\treturn fmt.Sprintf(\"%.1fM\", float64(n)/1000000)\n\t}\n\tif n \u003e= 1000 {\n\t\treturn fmt.Sprintf(\"%.1fK\", float64(n)/1000)\n\t}\n\treturn fmt.Sprintf(\"%d\", n)\n}\n```\n\n## Tests:\n\n```go\n// internal/badge/format_test.go\npackage badge\n\nimport \"testing\"\n\nfunc TestFormatNumber(t *testing.T) {\n\ttests := []struct {\n\t\tinput    int\n\t\texpected string\n\t}{\n\t\t{500, \"500\"},\n\t\t{1200, \"1.2K\"},\n\t\t{15000, \"15.0K\"},\n\t\t{1500000, \"1.5M\"},\n\t\t{2350000, \"2.4M\"},\n\t}\n\n\tfor _, tt := range tests {\n\t\tresult := FormatNumber(tt.input)\n\t\tif result != tt.expected {\n\t\t\tt.Errorf(\"FormatNumber(%d) = %s, expected %s\", tt.input, result, tt.expected)\n\t\t}\n\t}\n}\n```\n\n```go\n// internal/badge/generator_test.go\npackage badge\n\nimport (\n\t\"image\"\n\t\"testing\"\n)\n\nfunc TestGenerate(t *testing.T) {\n\t// Requires test emblem image\n\tt.Skip(\"Requires test emblem fixture\")\n}\n```\n\n## Verification:\n```bash\n# Create internal/badge/assets/fonts/ and copy font\nmkdir -p internal/badge/assets/fonts\ncp scripts/assets/fonts/Rajdhani-Bold.ttf internal/badge/assets/fonts/\n\ngo test -v ./internal/badge/\ngo run cmd/contribemblem/main.go generate  # Requires stats.json and emblem.jpg\n```\n\n## Update cmd/contribemblem/main.go:\nReplace generate case with logic to read data/stats.json, call badge.Generate()\n\n## Depends on: GO-01","status":"in_progress","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T22:19:53.598568349-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:51:14.259690794-05:00","dependencies":[{"issue_id":"contribemblem-20q","depends_on_id":"contribemblem-s4f","type":"blocks","created_at":"2026-02-06T22:20:42.570165123-05:00","created_by":"Jorge O. Castro"},{"issue_id":"contribemblem-20q","depends_on_id":"contribemblem-r50","type":"blocks","created_at":"2026-02-06T22:20:43.512407138-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-2hg","title":"STATS-05: Include 5 core metrics","description":"Stats include: commits, PRs, issues, code reviews, stars received.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:56:15.628655412-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:56:18.850355183-05:00","closed_at":"2026-02-06T21:56:18.850355183-05:00","close_reason":"Completed in Phase 2 (Jan 28, 2026)"}
{"id":"contribemblem-3g6","title":"GO-03: Port emblem selector (select-emblem.sh)","description":"Port scripts/select-emblem.sh to internal/emblem/selector.go\n\n## Bash script behavior to replicate:\n- Reads data/emblem-config.json rotation array\n- Uses ISO week number (YYYY-Www format, UTC)\n- SHA256 hash of ISO week string ‚Üí hex ‚Üí decimal\n- Modulo operation to select from rotation array\n- Fallback emblem: 1409726931 (The Seventh Column)\n\n## Files to create:\n- internal/emblem/selector.go\n- internal/emblem/selector_test.go\n\n## internal/emblem/selector.go structure:\n\n```go\npackage emblem\n\nimport (\n\t\"crypto/sha256\"\n\t\"encoding/binary\"\n\t\"encoding/json\"\n\t\"fmt\"\n\t\"os\"\n\t\"time\"\n)\n\nconst (\n\tFallbackEmblem = \"1409726931\" // \"The Seventh Column\" emblem\n\tDefaultConfigPath = \"data/emblem-config.json\"\n)\n\n// Config represents emblem-config.json structure\ntype Config struct {\n\tRotation []string `json:\"rotation\"`\n\tFallback string   `json:\"fallback\"`\n}\n\n// SelectEmblem performs deterministic weekly emblem selection\n// Uses ISO week number and SHA256-seeded modulo selection\nfunc SelectEmblem(configPath string) (string, error) {\n\t// Load config\n\tconfig, err := loadConfig(configPath)\n\tif err != nil || len(config.Rotation) == 0 {\n\t\t// Use fallback if config missing or rotation empty\n\t\treturn FallbackEmblem, nil\n\t}\n\n\t// Calculate ISO week in UTC (format: YYYY-Www, e.g., \"2026-W06\")\n\tnow := time.Now().UTC()\n\tyear, week := now.ISOWeek()\n\tisoWeek := fmt.Sprintf(\"%d-W%02d\", year, week)\n\n\t// Generate SHA256 hash of ISO week string\n\thash := sha256.Sum256([]byte(isoWeek))\n\t\n\t// Convert first 8 bytes of hash to uint64 (deterministic seed)\n\thashValue := binary.BigEndian.Uint64(hash[:8])\n\n\t// Select emblem using modulo operation\n\tindex := int(hashValue % uint64(len(config.Rotation)))\n\tselectedEmblem := config.Rotation[index]\n\n\treturn selectedEmblem, nil\n}\n\nfunc loadConfig(path string) (*Config, error) {\n\tdata, err := os.ReadFile(path)\n\tif err != nil {\n\t\treturn nil, fmt.Errorf(\"failed to read config: %w\", err)\n\t}\n\n\tvar config Config\n\tif err := json.Unmarshal(data, \u0026config); err != nil {\n\t\treturn nil, fmt.Errorf(\"failed to parse config: %w\", err)\n\t}\n\n\treturn \u0026config, nil\n}\n```\n\n## internal/emblem/selector_test.go structure:\n\n```go\npackage emblem\n\nimport (\n\t\"os\"\n\t\"path/filepath\"\n\t\"testing\"\n\t\"time\"\n)\n\nfunc TestSelectEmblem(t *testing.T) {\n\t// Create temp config file\n\ttmpDir := t.TempDir()\n\tconfigPath := filepath.Join(tmpDir, \"emblem-config.json\")\n\t\n\tconfigJSON := `{\"rotation\":[\"1409726931\",\"2448092419\",\"3642894792\"],\"fallback\":\"1409726931\"}`\n\tif err := os.WriteFile(configPath, []byte(configJSON), 0644); err != nil {\n\t\tt.Fatalf(\"Failed to write test config: %v\", err)\n\t}\n\n\temblem, err := SelectEmblem(configPath)\n\tif err != nil {\n\t\tt.Fatalf(\"SelectEmblem failed: %v\", err)\n\t}\n\n\t// Verify emblem is one of the rotation values\n\tvalidEmblems := map[string]bool{\n\t\t\"1409726931\": true,\n\t\t\"2448092419\": true,\n\t\t\"3642894792\": true,\n\t}\n\tif !validEmblems[emblem] {\n\t\tt.Errorf(\"Selected emblem %s not in rotation\", emblem)\n\t}\n}\n\nfunc TestSelectEmblemMissingConfig(t *testing.T) {\n\temblem, err := SelectEmblem(\"/nonexistent/config.json\")\n\tif err != nil {\n\t\tt.Fatalf(\"Expected no error on missing config, got %v\", err)\n\t}\n\tif emblem != FallbackEmblem {\n\t\tt.Errorf(\"Expected fallback emblem %s, got %s\", FallbackEmblem, emblem)\n\t}\n}\n\nfunc TestSelectEmblemEmptyRotation(t *testing.T) {\n\ttmpDir := t.TempDir()\n\tconfigPath := filepath.Join(tmpDir, \"emblem-config.json\")\n\t\n\tconfigJSON := `{\"rotation\":[],\"fallback\":\"1409726931\"}`\n\tif err := os.WriteFile(configPath, []byte(configJSON), 0644); err != nil {\n\t\tt.Fatalf(\"Failed to write test config: %v\", err)\n\t}\n\n\temblem, err := SelectEmblem(configPath)\n\tif err != nil {\n\t\tt.Fatalf(\"Expected no error on empty rotation, got %v\", err)\n\t}\n\tif emblem != FallbackEmblem {\n\t\tt.Errorf(\"Expected fallback emblem %s, got %s\", FallbackEmblem, emblem)\n\t}\n}\n\nfunc TestSelectEmblemDeterministic(t *testing.T) {\n\ttmpDir := t.TempDir()\n\tconfigPath := filepath.Join(tmpDir, \"emblem-config.json\")\n\t\n\tconfigJSON := `{\"rotation\":[\"1409726931\",\"2448092419\",\"3642894792\"],\"fallback\":\"1409726931\"}`\n\tif err := os.WriteFile(configPath, []byte(configJSON), 0644); err != nil {\n\t\tt.Fatalf(\"Failed to write test config: %v\", err)\n\t}\n\n\t// Select emblem twice - should be identical\n\temblem1, _ := SelectEmblem(configPath)\n\temblem2, _ := SelectEmblem(configPath)\n\n\tif emblem1 != emblem2 {\n\t\tt.Errorf(\"Selection not deterministic: %s != %s\", emblem1, emblem2)\n\t}\n}\n```\n\n## Verification:\n```bash\ngo test -v ./internal/emblem/\ngo run cmd/contribemblem/main.go select-emblem  # Should print emblem hash\n```\n\n## Update cmd/contribemblem/main.go:\nReplace select-emblem case with:\n```go\ncase \"select-emblem\":\n\temblem, err := emblem.SelectEmblem(emblem.DefaultConfigPath)\n\tif err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Error: %v\\n\", err)\n\t\tos.Exit(1)\n\t}\n\tfmt.Println(emblem)\n```\n\nAdd import: \"github.com/castrojo/contribemblem/internal/emblem\"\n\n## Depends on: GO-01","status":"in_progress","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T22:18:47.260865602-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:50:15.918266417-05:00","dependencies":[{"issue_id":"contribemblem-3g6","depends_on_id":"contribemblem-s4f","type":"blocks","created_at":"2026-02-06T22:20:42.450263858-05:00","created_by":"Jorge O. Castro"},{"issue_id":"contribemblem-3g6","depends_on_id":"contribemblem-r50","type":"blocks","created_at":"2026-02-06T22:20:43.392163899-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-44y","title":"IMAGE-06: Stable filename overwrites previous","description":"Generated image saved with stable filename (badge.png) that overwrites previous version. fs.writeFile to repository root, not appendFile or unique names.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:02.685574029-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:27:15.612067512-05:00","closed_at":"2026-02-06T22:27:15.612067512-05:00","close_reason":"Superseded by GO-05 (contribemblem-20q) which incorporates all IMAGE requirements"}
{"id":"contribemblem-4el","title":"EMBLM-02: Weekly random emblem selection","description":"Action randomly selects one emblem from user's rotation list weekly.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:56:32.130985623-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:56:38.077166189-05:00","closed_at":"2026-02-06T21:56:38.077166189-05:00","close_reason":"Completed in Phase 3 (Jan 28, 2026)"}
{"id":"contribemblem-4ot","title":"FILES-03: README includes image and timestamp","description":"README injection includes emblem image path and last updated timestamp.","status":"open","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:18.039521131-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:18.039521131-05:00","dependencies":[{"issue_id":"contribemblem-4ot","depends_on_id":"contribemblem-rqx","type":"blocks","created_at":"2026-02-06T21:58:07.459422081-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-5z8","title":"v2: Achievement System","description":"ACHVT-01/02: User earns achievement badges for milestones (100 commits, 10 PRs merged, etc.). Achievement icons displayed alongside stats. Deferred to v2.","status":"open","priority":4,"issue_type":"feature","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:40.296603287-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:40.296603287-05:00","dependencies":[{"issue_id":"contribemblem-5z8","depends_on_id":"contribemblem-68c","type":"blocks","created_at":"2026-02-06T21:58:11.768279413-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-68c","title":"Phase 6: Configuration \u0026 Validation","description":"YAML configuration for user customization with schema validation. Username, metrics selection, emblem rotation list, clear error messages, emblem ID validation, example config. Depends on Phase 5. Requirements: CONFG-01 through CONFG-06.","status":"open","priority":2,"issue_type":"feature","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:55:34.619509064-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:55:34.619509064-05:00","dependencies":[{"issue_id":"contribemblem-68c","depends_on_id":"contribemblem-dlq","type":"blocks","created_at":"2026-02-06T21:58:01.179681925-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-6jw","title":"ACTNS-04: Git user config in workflow","description":"Action configures git user.name and user.email in workflow setup for proper commit metadata.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:55:55.413447273-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:55:58.535615059-05:00","closed_at":"2026-02-06T21:55:58.535615059-05:00","close_reason":"Completed in Phase 1 (Jan 27, 2026)"}
{"id":"contribemblem-72b","title":"CONFG-04: Clear error messages for invalid config","description":"Config validation provides clear error messages for invalid YAML structure and formats.","status":"open","priority":3,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:24.048019042-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:24.048019042-05:00","dependencies":[{"issue_id":"contribemblem-72b","depends_on_id":"contribemblem-dlq","type":"blocks","created_at":"2026-02-06T21:58:10.01370792-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-7xc","title":"STATS-01: Fetch GitHub stats via GraphQL API","description":"Action fetches GitHub contribution stats via GraphQL API.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:56:09.54058219-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:56:18.820766719-05:00","closed_at":"2026-02-06T21:56:18.820766719-05:00","close_reason":"Completed in Phase 2 (Jan 28, 2026)"}
{"id":"contribemblem-803","title":"FILES-02: Marker-based README injection","description":"README updated between HTML comment markers without overwriting user content. Non-destructive injection using marker-based approach.","status":"open","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:16.979634013-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:16.979634013-05:00","dependencies":[{"issue_id":"contribemblem-803","depends_on_id":"contribemblem-rqx","type":"blocks","created_at":"2026-02-06T21:58:07.40227607-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-8rs","title":"FILES-04: Skip commit if image unchanged","description":"No commit created if image hash unchanged from previous run. Prevents empty/duplicate commits.","status":"open","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:19.448211722-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:19.448211722-05:00","dependencies":[{"issue_id":"contribemblem-8rs","depends_on_id":"contribemblem-rqx","type":"blocks","created_at":"2026-02-06T21:58:07.519584337-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-9h0","title":"CONFG-05: Validate emblem IDs exist","description":"Config parser validates emblem IDs exist in catalog before attempting API fetch.","status":"open","priority":3,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:25.121457145-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:25.121457145-05:00","dependencies":[{"issue_id":"contribemblem-9h0","depends_on_id":"contribemblem-dlq","type":"blocks","created_at":"2026-02-06T21:58:10.070056003-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-a6p","title":"CONFG-06: Example config file","description":"Example config file provided in repository demonstrating all supported options.","status":"open","priority":3,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:26.117545025-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:26.117545025-05:00","dependencies":[{"issue_id":"contribemblem-a6p","depends_on_id":"contribemblem-dlq","type":"blocks","created_at":"2026-02-06T21:58:10.126128854-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-a72","title":"STATS-03: Cache API responses with 24hr expiry","description":"API responses cached with 24hr expiry to avoid rate limits. Date-based cache key (github-stats-YYYYMMDD).","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:56:12.694672771-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:56:18.836109231-05:00","closed_at":"2026-02-06T21:56:18.836109231-05:00","close_reason":"Completed in Phase 2 (Jan 28, 2026)"}
{"id":"contribemblem-abx","title":"v2: Private Repository Stats","description":"PRIVT-01/02: Action supports private repository contributions via PAT. Self-hosted deployment guide for private repo stats. Deferred to v2.","status":"open","priority":4,"issue_type":"feature","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:43.384534778-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:43.384534778-05:00","dependencies":[{"issue_id":"contribemblem-abx","depends_on_id":"contribemblem-68c","type":"blocks","created_at":"2026-02-06T21:58:11.881708867-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-ahr","title":"IMAGE-05: 800x400px image dimensions","description":"Image dimensions optimized for GitHub markdown display (800x400px). createCanvas(800, 400) with emblem filling entire background.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:00.848377288-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:27:15.609267487-05:00","closed_at":"2026-02-06T22:27:15.609267487-05:00","close_reason":"Superseded by GO-05 (contribemblem-20q) which incorporates all IMAGE requirements"}
{"id":"contribemblem-bpy","title":"Phase 3: Bungie API Integration","description":"Connect to Bungie API for emblem artwork and weekly rotation. SHA256-seeded deterministic weekly selection, Bungie API authentication, fallback emblem on failure. Requirements: EMBLM-01 through EMBLM-04.","status":"closed","priority":2,"issue_type":"feature","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:55:27.155088202-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:55:39.646589123-05:00","closed_at":"2026-02-06T21:55:39.646589123-05:00","close_reason":"Completed Jan 27-28 2026. See .planning/phases/ summaries."}
{"id":"contribemblem-bys","title":"v2: Custom Emblems","description":"CUSTM-01/02: User can upload custom emblem artwork (requires moderation). Custom emblems stored in repository assets directory. Deferred to v2.","status":"open","priority":4,"issue_type":"feature","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:38.59705191-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:38.59705191-05:00","dependencies":[{"issue_id":"contribemblem-bys","depends_on_id":"contribemblem-68c","type":"blocks","created_at":"2026-02-06T21:58:11.711220804-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-c2q","title":"CONFG-01: Username in YAML config","description":"User can define username in YAML config file.","status":"open","priority":3,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:20.537136388-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:20.537136388-05:00","dependencies":[{"issue_id":"contribemblem-c2q","depends_on_id":"contribemblem-dlq","type":"blocks","created_at":"2026-02-06T21:58:09.842808383-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-cx7","title":"GO-06: Implement 'run' subcommand (full pipeline orchestration)","description":"Implement the 'run' subcommand that orchestrates the full pipeline. This replaces the workflow orchestration currently in .github/workflows/update-emblem.yml.\n\n## Pipeline sequence:\n1. Fetch GitHub stats ‚Üí data/stats.json\n2. Select emblem hash from config\n3. Fetch emblem image from Bungie ‚Üí data/emblem.jpg\n4. Generate badge PNG ‚Üí badge.png\n5. (Future: README update and git commit - FILES-01 through FILES-04 requirements)\n\n## Files to create/modify:\n- cmd/contribemblem/main.go (add run case logic)\n- OR internal/pipeline/run.go (if complex orchestration logic)\n\n## cmd/contribemblem/main.go run case implementation:\n\n```go\ncase \"run\":\n\tfmt.Println(\"Running full ContribEmblem pipeline...\")\n\n\t// Step 1: Fetch GitHub stats\n\tfmt.Println(\"[1/4] Fetching GitHub stats...\")\n\tstats, err := github.FetchStats()\n\tif err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Failed to fetch stats: %v\\n\", err)\n\t\tos.Exit(1)\n\t}\n\n\t// Save stats to data/stats.json\n\tif err := os.MkdirAll(\"data\", 0755); err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Failed to create data directory: %v\\n\", err)\n\t\tos.Exit(1)\n\t}\n\tstatsJSON, _ := json.MarshalIndent(stats, \"\", \"  \")\n\tif err := os.WriteFile(\"data/stats.json\", statsJSON, 0644); err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Failed to write stats.json: %v\\n\", err)\n\t\tos.Exit(1)\n\t}\n\tfmt.Println(\"‚úì Stats saved to data/stats.json\")\n\n\t// Step 2: Select emblem\n\tfmt.Println(\"[2/4] Selecting weekly emblem...\")\n\temblemHash, err := emblem.SelectEmblem(emblem.DefaultConfigPath)\n\tif err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Failed to select emblem: %v\\n\", err)\n\t\tos.Exit(1)\n\t}\n\tfmt.Printf(\"‚úì Selected emblem: %s\\n\", emblemHash)\n\n\t// Step 3: Fetch emblem from Bungie\n\tfmt.Println(\"[3/4] Fetching emblem from Bungie API...\")\n\tif err := bungie.FetchEmblem(emblemHash); err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Failed to fetch emblem: %v\\n\", err)\n\t\tos.Exit(1)\n\t}\n\tfmt.Println(\"‚úì Emblem downloaded to data/emblem.jpg\")\n\n\t// Step 4: Generate badge\n\tfmt.Println(\"[4/4] Generating badge image...\")\n\tbadgeStats := \u0026badge.Stats{\n\t\tCommits:      stats.Commits,\n\t\tPullRequests: stats.PullRequests,\n\t\tIssues:       stats.Issues,\n\t\tReviews:      stats.Reviews,\n\t\tStars:        stats.StarsReceived,\n\t}\n\tif err := badge.Generate(\"data/emblem.jpg\", badgeStats, \"badge.png\"); err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Failed to generate badge: %v\\n\", err)\n\t\tos.Exit(1)\n\t}\n\tfmt.Println(\"‚úì Badge generated: badge.png\")\n\n\tfmt.Println(\"\\nüéâ Pipeline complete! Badge ready at badge.png\")\n```\n\n## Error handling:\n- Each step must fail fast with clear error messages\n- If emblem fetch fails, consider using fallback emblem (optional enhancement)\n- Log each step's progress to stderr for workflow visibility\n\n## Verification:\n```bash\nexport GITHUB_TOKEN=$YOUR_TOKEN\nexport GITHUB_ACTOR=$YOUR_USERNAME\nexport BUNGIE_API_KEY=$YOUR_KEY\ngo run cmd/contribemblem/main.go run\n# Should produce:\n# - data/stats.json\n# - data/emblem.jpg\n# - badge.png\nls -lh badge.png\nfile badge.png  # Should be PNG image data, 800 x 400\n```\n\n## Depends on: GO-02, GO-03, GO-04, GO-05","status":"in_progress","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T22:20:09.065070583-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:52:22.435177053-05:00","dependencies":[{"issue_id":"contribemblem-cx7","depends_on_id":"contribemblem-s4f","type":"blocks","created_at":"2026-02-06T22:20:42.630469393-05:00","created_by":"Jorge O. Castro"},{"issue_id":"contribemblem-cx7","depends_on_id":"contribemblem-128","type":"blocks","created_at":"2026-02-06T22:20:44.19137383-05:00","created_by":"Jorge O. Castro"},{"issue_id":"contribemblem-cx7","depends_on_id":"contribemblem-3g6","type":"blocks","created_at":"2026-02-06T22:20:44.251798821-05:00","created_by":"Jorge O. Castro"},{"issue_id":"contribemblem-cx7","depends_on_id":"contribemblem-i2e","type":"blocks","created_at":"2026-02-06T22:20:44.314036429-05:00","created_by":"Jorge O. Castro"},{"issue_id":"contribemblem-cx7","depends_on_id":"contribemblem-20q","type":"blocks","created_at":"2026-02-06T22:20:44.373215459-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-d9p","title":"ACTNS-02: Prevent infinite trigger loops","description":"Action prevents infinite trigger loops via [skip ci] commit message and path filters. Dual defense-in-depth approach.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:55:52.81007337-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:55:58.521009824-05:00","closed_at":"2026-02-06T21:55:58.521009824-05:00","close_reason":"Completed in Phase 1 (Jan 27, 2026)"}
{"id":"contribemblem-dlf","title":"Phase 1: GitHub Actions Foundation","description":"Set up scheduled workflow infrastructure with proper permissions and loop prevention. Weekly cron trigger (Sundays midnight UTC), [skip ci] + paths-ignore for loop prevention, contents:write permissions, git user config. Requirements: ACTNS-01 through ACTNS-04.","status":"closed","priority":2,"issue_type":"feature","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:55:22.786450249-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:55:39.632033078-05:00","closed_at":"2026-02-06T21:55:39.632033078-05:00","close_reason":"Completed Jan 27-28 2026. See .planning/phases/ summaries."}
{"id":"contribemblem-dlq","title":"Phase 5: README Update \u0026 Commit","description":"Non-destructively update README and commit generated PNG. HTML comment markers for injection, conditional commits (only if hash changed), [skip ci] message. Depends on Phase 4. Requirements: FILES-01 through FILES-04.","status":"open","priority":2,"issue_type":"feature","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:55:32.516822615-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:55:32.516822615-05:00","dependencies":[{"issue_id":"contribemblem-dlq","depends_on_id":"contribemblem-rqx","type":"blocks","created_at":"2026-02-06T21:58:00.518682042-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-e43","title":"CONFG-02: Selectable metrics display","description":"User can select which metrics to display (commits, PRs, issues, reviews, stars).","status":"open","priority":3,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:21.946205582-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:21.946205582-05:00","dependencies":[{"issue_id":"contribemblem-e43","depends_on_id":"contribemblem-dlq","type":"blocks","created_at":"2026-02-06T21:58:09.899974424-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-i2e","title":"GO-04: Port Bungie API client (fetch-emblem.sh)","description":"Port scripts/fetch-emblem.sh to internal/bungie/manifest.go\n\n## Bash script behavior to replicate:\n- Fetch Bungie manifest metadata (GET /Platform/Destiny2/Manifest/)\n- Extract DestinyInventoryItemDefinition URL from response\n- Download manifest database (~100MB JSON, cache to data/manifest.json)\n- Look up emblem hash in manifest\n- Extract icon path from emblem data\n- Download emblem image (JPEG) to data/emblem.jpg\n- Validate image format\n- User-Agent: ContribEmblem/1.0 (+https://github.com/castrojo/contribemblem)\n- Requires BUNGIE_API_KEY env var\n\n## Files to create:\n- internal/bungie/manifest.go\n- internal/bungie/manifest_test.go\n\n## internal/bungie/manifest.go structure:\n\n```go\npackage bungie\n\nimport (\n\t\"encoding/json\"\n\t\"fmt\"\n\t\"io\"\n\t\"net/http\"\n\t\"os\"\n\t\"time\"\n)\n\nconst (\n\tBungieBaseURL = \"https://www.bungie.net\"\n\tManifestAPI   = BungieBaseURL + \"/Platform/Destiny2/Manifest/\"\n\tUserAgent     = \"ContribEmblem/1.0 (+https://github.com/castrojo/contribemblem)\"\n\tManifestCache = \"data/manifest.json\"\n\tEmblemOutput  = \"data/emblem.jpg\"\n)\n\n// Manifest API response structures\ntype manifestResponse struct {\n\tErrorCode   int    `json:\"ErrorCode\"`\n\tErrorStatus string `json:\"ErrorStatus\"`\n\tResponse    struct {\n\t\tJSONWorldComponentContentPaths struct {\n\t\t\tEn struct {\n\t\t\t\tDestinyInventoryItemDefinition string `json:\"DestinyInventoryItemDefinition\"`\n\t\t\t} `json:\"en\"`\n\t\t} `json:\"jsonWorldComponentContentPaths\"`\n\t} `json:\"Response\"`\n}\n\n// Emblem data from manifest\ntype emblemData struct {\n\tDisplayProperties struct {\n\t\tIcon string `json:\"icon\"`\n\t} `json:\"displayProperties\"`\n}\n\n// FetchEmblem downloads emblem artwork from Bungie API\n// emblemHash: emblem identifier (e.g., \"1409726931\")\n// Returns path to downloaded emblem image\nfunc FetchEmblem(emblemHash string) error {\n\tapiKey := os.Getenv(\"BUNGIE_API_KEY\")\n\tif apiKey == \"\" {\n\t\treturn fmt.Errorf(\"BUNGIE_API_KEY environment variable not set\")\n\t}\n\n\tfmt.Fprintf(os.Stderr, \"Fetching emblem hash: %s\\n\", emblemHash)\n\n\t// Fetch manifest metadata\n\tfmt.Fprintf(os.Stderr, \"Fetching Bungie manifest metadata...\\n\")\n\tmanifestURL, err := getManifestURL(apiKey)\n\tif err != nil {\n\t\treturn fmt.Errorf(\"failed to get manifest URL: %w\", err)\n\t}\n\n\tfmt.Fprintf(os.Stderr, \"Manifest URL: %s\\n\", manifestURL)\n\n\t// Download manifest if not cached\n\tif err := downloadManifestIfNeeded(manifestURL); err != nil {\n\t\treturn fmt.Errorf(\"failed to download manifest: %w\", err)\n\t}\n\n\t// Look up emblem in manifest\n\tfmt.Fprintf(os.Stderr, \"Looking up emblem %s in manifest...\\n\", emblemHash)\n\ticonPath, err := lookupEmblemIcon(emblemHash)\n\tif err != nil {\n\t\treturn fmt.Errorf(\"failed to lookup emblem: %w\", err)\n\t}\n\n\t// Download emblem image\n\ticonURL := BungieBaseURL + iconPath\n\tfmt.Fprintf(os.Stderr, \"Downloading emblem image from: %s\\n\", iconURL)\n\tif err := downloadImage(iconURL, EmblemOutput); err != nil {\n\t\treturn fmt.Errorf(\"failed to download emblem image: %w\", err)\n\t}\n\n\tfmt.Fprintf(os.Stderr, \"‚úì Emblem image saved to %s\\n\", EmblemOutput)\n\treturn nil\n}\n\nfunc getManifestURL(apiKey string) (string, error) {\n\treq, err := http.NewRequest(\"GET\", ManifestAPI, nil)\n\tif err != nil {\n\t\treturn \"\", err\n\t}\n\n\treq.Header.Set(\"X-API-Key\", apiKey)\n\treq.Header.Set(\"User-Agent\", UserAgent)\n\n\tclient := \u0026http.Client{Timeout: 30 * time.Second}\n\tresp, err := client.Do(req)\n\tif err != nil {\n\t\treturn \"\", err\n\t}\n\tdefer resp.Body.Close()\n\n\t// Log rate limit\n\tif remaining := resp.Header.Get(\"X-Ratelimit-Remaining\"); remaining != \"\" {\n\t\tfmt.Fprintf(os.Stderr, \"‚ÑπÔ∏è  Rate limit remaining: %s\\n\", remaining)\n\t}\n\n\tbody, err := io.ReadAll(resp.Body)\n\tif err != nil {\n\t\treturn \"\", err\n\t}\n\n\tvar manifest manifestResponse\n\tif err := json.Unmarshal(body, \u0026manifest); err != nil {\n\t\treturn \"\", err\n\t}\n\n\tif manifest.ErrorCode != 1 {\n\t\treturn \"\", fmt.Errorf(\"Bungie API error %d: %s\", manifest.ErrorCode, manifest.ErrorStatus)\n\t}\n\n\tmanifestURL := manifest.Response.JSONWorldComponentContentPaths.En.DestinyInventoryItemDefinition\n\tif manifestURL == \"\" {\n\t\treturn \"\", fmt.Errorf(\"manifest URL not found in response\")\n\t}\n\n\treturn BungieBaseURL + manifestURL, nil\n}\n\nfunc downloadManifestIfNeeded(url string) error {\n\tif _, err := os.Stat(ManifestCache); err == nil {\n\t\tfmt.Fprintf(os.Stderr, \"‚úì Using cached manifest\\n\")\n\t\treturn nil\n\t}\n\n\tfmt.Fprintf(os.Stderr, \"Downloading manifest database (~100MB, this may take a moment)...\\n\")\n\t\n\treq, err := http.NewRequest(\"GET\", url, nil)\n\tif err != nil {\n\t\treturn err\n\t}\n\treq.Header.Set(\"User-Agent\", UserAgent)\n\n\tclient := \u0026http.Client{Timeout: 5 * time.Minute}\n\tresp, err := client.Do(req)\n\tif err != nil {\n\t\treturn err\n\t}\n\tdefer resp.Body.Close()\n\n\tif resp.StatusCode != http.StatusOK {\n\t\treturn fmt.Errorf(\"HTTP %d\", resp.StatusCode)\n\t}\n\n\t// Ensure data directory exists\n\tif err := os.MkdirAll(\"data\", 0755); err != nil {\n\t\treturn err\n\t}\n\n\tout, err := os.Create(ManifestCache)\n\tif err != nil {\n\t\treturn err\n\t}\n\tdefer out.Close()\n\n\t_, err = io.Copy(out, resp.Body)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tfmt.Fprintf(os.Stderr, \"‚úì Manifest cached\\n\")\n\treturn nil\n}\n\nfunc lookupEmblemIcon(emblemHash string) (string, error) {\n\tdata, err := os.ReadFile(ManifestCache)\n\tif err != nil {\n\t\treturn \"\", err\n\t}\n\n\tvar manifest map[string]emblemData\n\tif err := json.Unmarshal(data, \u0026manifest); err != nil {\n\t\treturn \"\", err\n\t}\n\n\temblem, ok := manifest[emblemHash]\n\tif !ok {\n\t\treturn \"\", fmt.Errorf(\"emblem hash %s not found in manifest\", emblemHash)\n\t}\n\n\tif emblem.DisplayProperties.Icon == \"\" {\n\t\treturn \"\", fmt.Errorf(\"icon path not found for emblem %s\", emblemHash)\n\t}\n\n\treturn emblem.DisplayProperties.Icon, nil\n}\n\nfunc downloadImage(url, outputPath string) error {\n\treq, err := http.NewRequest(\"GET\", url, nil)\n\tif err != nil {\n\t\treturn err\n\t}\n\treq.Header.Set(\"User-Agent\", UserAgent)\n\n\tclient := \u0026http.Client{Timeout: 60 * time.Second}\n\tresp, err := client.Do(req)\n\tif err != nil {\n\t\treturn err\n\t}\n\tdefer resp.Body.Close()\n\n\tif resp.StatusCode != http.StatusOK {\n\t\treturn fmt.Errorf(\"HTTP %d\", resp.StatusCode)\n\t}\n\n\t// Ensure data directory exists\n\tif err := os.MkdirAll(\"data\", 0755); err != nil {\n\t\treturn err\n\t}\n\n\tout, err := os.Create(outputPath)\n\tif err != nil {\n\t\treturn err\n\t}\n\tdefer out.Close()\n\n\t_, err = io.Copy(out, resp.Body)\n\treturn err\n}\n```\n\n## internal/bungie/manifest_test.go structure:\n\n```go\npackage bungie\n\nimport (\n\t\"net/http\"\n\t\"net/http/httptest\"\n\t\"os\"\n\t\"path/filepath\"\n\t\"testing\"\n)\n\nfunc TestGetManifestURL(t *testing.T) {\n\tserver := httptest.NewServer(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n\t\tif r.Header.Get(\"X-API-Key\") != \"test-key\" {\n\t\t\tt.Errorf(\"Expected X-API-Key header\")\n\t\t}\n\t\tresponse := `{\"ErrorCode\":1,\"Response\":{\"jsonWorldComponentContentPaths\":{\"en\":{\"DestinyInventoryItemDefinition\":\"/test/manifest.json\"}}}}`\n\t\tw.Write([]byte(response))\n\t}))\n\tdefer server.Close()\n\n\t// Test requires refactoring getManifestURL to accept URL parameter\n\tt.Skip(\"Requires endpoint injection for testing\")\n}\n\nfunc TestLookupEmblemIcon(t *testing.T) {\n\ttmpDir := t.TempDir()\n\ttestCache := filepath.Join(tmpDir, \"manifest.json\")\n\t\n\t// Write test manifest\n\tmanifestJSON := `{\"1409726931\":{\"displayProperties\":{\"icon\":\"/test/icon.jpg\"}}}`\n\tif err := os.WriteFile(testCache, []byte(manifestJSON), 0644); err != nil {\n\t\tt.Fatalf(\"Failed to write test manifest: %v\", err)\n\t}\n\n\t// Override ManifestCache const (requires refactoring to accept parameter)\n\t// For now, test the lookup logic directly\n\tt.Skip(\"Requires refactoring to accept cache path parameter\")\n}\n```\n\n## Verification:\n```bash\ngo test -v ./internal/bungie/\nexport BUNGIE_API_KEY=$YOUR_KEY\ngo run cmd/contribemblem/main.go fetch-emblem  # Reads hash from stdin\necho \"1409726931\" | go run cmd/contribemblem/main.go fetch-emblem\n```\n\n## Update cmd/contribemblem/main.go:\nReplace fetch-emblem case with:\n```go\ncase \"fetch-emblem\":\n\t// Read emblem hash from stdin\n\tvar emblemHash string\n\tif _, err := fmt.Scanln(\u0026emblemHash); err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Error reading emblem hash: %v\\n\", err)\n\t\tos.Exit(1)\n\t}\n\tif err := bungie.FetchEmblem(emblemHash); err != nil {\n\t\tfmt.Fprintf(os.Stderr, \"Error: %v\\n\", err)\n\t\tos.Exit(1)\n\t}\n```\n\nAdd import: \"github.com/castrojo/contribemblem/internal/bungie\"\n\n## Depends on: GO-01","status":"in_progress","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T22:19:16.552016873-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:50:41.922463139-05:00","dependencies":[{"issue_id":"contribemblem-i2e","depends_on_id":"contribemblem-s4f","type":"blocks","created_at":"2026-02-06T22:20:42.512329193-05:00","created_by":"Jorge O. Castro"},{"issue_id":"contribemblem-i2e","depends_on_id":"contribemblem-r50","type":"blocks","created_at":"2026-02-06T22:20:43.453169026-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-ion","title":"EMBLM-01: Fetch emblem artwork from Bungie API","description":"Action fetches emblem artwork from Bungie API with proper authentication headers (X-API-Key).","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:56:30.93185331-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:56:38.07029751-05:00","closed_at":"2026-02-06T21:56:38.07029751-05:00","close_reason":"Completed in Phase 3 (Jan 28, 2026)"}
{"id":"contribemblem-iwx","title":"v2: Multi-User Support","description":"MULTI-01/02: Single config can generate badges for multiple team members. Team aggregate stats displayed on separate team badge. Deferred to v2.","status":"open","priority":4,"issue_type":"feature","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:41.86072204-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:41.86072204-05:00","dependencies":[{"issue_id":"contribemblem-iwx","depends_on_id":"contribemblem-68c","type":"blocks","created_at":"2026-02-06T21:58:11.824736998-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-li7","title":"GO-08: Remove old bash scripts and Node.js dependencies","description":"Clean up legacy bash scripts and Node.js files after Go conversion is complete and tested.\n\n## Files to delete:\n- scripts/fetch-stats.sh (replaced by internal/github/stats.go)\n- scripts/process-stats.sh (integrated into stats.go)\n- scripts/select-emblem.sh (replaced by internal/emblem/selector.go)\n- scripts/fetch-emblem.sh (replaced by internal/bungie/manifest.go)\n- package.json (Node.js canvas dependency, never used)\n- package-lock.json (if exists)\n- node_modules/ (if exists)\n\n## Files to KEEP:\n- scripts/assets/fonts/Rajdhani-Bold.ttf (used by Go binary via embed OR keep as backup)\n- data/emblem-config.json (still used by Go binary)\n- .github/workflows/update-emblem.yml (updated to use Go)\n\n## Optional: Clean up scripts/ directory structure\nIf font is embedded in Go binary (go:embed), consider:\n- Move scripts/assets/fonts/Rajdhani-Bold.ttf ‚Üí internal/badge/assets/fonts/Rajdhani-Bold.ttf\n- Remove scripts/ directory entirely (now empty)\nOR\n- Keep scripts/assets/fonts/ as canonical font location if not using embed\n\n## Commands to run:\n```bash\n# Remove bash scripts\nrm scripts/fetch-stats.sh\nrm scripts/process-stats.sh\nrm scripts/select-emblem.sh\nrm scripts/fetch-emblem.sh\n\n# Remove Node.js files\nrm package.json\nrm -f package-lock.json\nrm -rf node_modules/\n\n# Optional: reorganize fonts\n# If using go:embed from internal/badge/assets/fonts/:\nmkdir -p internal/badge/assets/fonts/\ncp scripts/assets/fonts/Rajdhani-Bold.ttf internal/badge/assets/fonts/\nrm -rf scripts/\n\n# OR keep scripts/assets/fonts/ as is for reference\n```\n\n## Update .gitignore (if needed):\nRemove Node.js-specific entries:\n```\nnode_modules/\npackage-lock.json\n```\n\n## Verification:\n```bash\n# Ensure Go binary still works after cleanup\nmake build\n./contribemblem run\n\n# Ensure workflow still works\n# (Test in GitHub Actions or with act)\n\n# Check for any remaining references to old scripts\ngit grep -i \"fetch-stats.sh\" || echo \"No references found\"\ngit grep -i \"process-stats.sh\" || echo \"No references found\"\ngit grep -i \"select-emblem.sh\" || echo \"No references found\"\ngit grep -i \"fetch-emblem.sh\" || echo \"No references found\"\ngit grep -i \"package.json\" || echo \"No references found (outside .beads)\"\n```\n\n## Documentation updates (if README mentions bash scripts):\nSearch README.md for references to:\n- bash scripts\n- Node.js/npm\n- canvas dependency\nUpdate to mention Go binary instead.\n\n## Commit message:\n```\nchore: remove legacy bash scripts and Node.js dependencies\n\nCompletes Go conversion. All functionality now provided by single\nGo binary (contribemblem). Removed:\n- scripts/fetch-stats.sh, process-stats.sh, select-emblem.sh, fetch-emblem.sh\n- package.json (unused Node.js dependency)\n\nFont asset retained at [location].\n```\n\n## Depends on: GO-07 (workflow must be updated and tested first)","status":"open","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T22:20:36.456333966-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:20:36.456333966-05:00","dependencies":[{"issue_id":"contribemblem-li7","depends_on_id":"contribemblem-s4f","type":"blocks","created_at":"2026-02-06T22:20:42.74828328-05:00","created_by":"Jorge O. Castro"},{"issue_id":"contribemblem-li7","depends_on_id":"contribemblem-smp","type":"blocks","created_at":"2026-02-06T22:20:45.007695007-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-nmh","title":"EMBLM-04: Fallback emblem on API failure","description":"Fallback emblem used if fetch fails or emblem ID invalid. Resilience without workflow failure.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:56:35.18194473-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:56:38.091148359-05:00","closed_at":"2026-02-06T21:56:38.091148359-05:00","close_reason":"Completed in Phase 3 (Jan 28, 2026)"}
{"id":"contribemblem-orp","title":"EMBLM-03: Seeded selection for weekly consistency","description":"Random selection seeded by ISO week number (SHA256) for consistency within week.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:56:33.581192241-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:56:38.084081208-05:00","closed_at":"2026-02-06T21:56:38.084081208-05:00","close_reason":"Completed in Phase 3 (Jan 28, 2026)"}
{"id":"contribemblem-otq","title":"IMAGE-03: Individual stat values with icons","description":"Individual metric values and icons displayed below Power Level. Horizontal row at bottom with symbolic Unicode icons (commits=circle, PRs=diamond, issues=square, reviews=triangle, stars=star). K/M number formatting for large values.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:56:56.607244498-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:27:15.60382399-05:00","closed_at":"2026-02-06T22:27:15.60382399-05:00","close_reason":"Superseded by GO-05 (contribemblem-20q) which incorporates all IMAGE requirements"}
{"id":"contribemblem-pti","title":"STATS-04: Monitor rate limit headers","description":"Rate limit headers monitored and logged (X-RateLimit-Remaining). Non-blocking warnings without failing workflow.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:56:14.134292447-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:56:18.843267092-05:00","closed_at":"2026-02-06T21:56:18.843267092-05:00","close_reason":"Completed in Phase 2 (Jan 28, 2026)"}
{"id":"contribemblem-qcf","title":"IMAGE-01: Generate PNG with emblem background and stat overlays","description":"Action generates PNG image with emblem background and stat overlays. Uses node-canvas to composite Phase 3 emblem artwork with Phase 2 stats data. Implementation: scripts/generate-badge.js with canvas.loadImage for emblem, drawImage to fill 800x400 canvas.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:56:51.761982926-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:27:15.596533427-05:00","closed_at":"2026-02-06T22:27:15.596533427-05:00","close_reason":"Superseded by GO-05 (contribemblem-20q) which incorporates all IMAGE requirements"}
{"id":"contribemblem-r3g","title":"STATS-02: Filter stats to current calendar year","description":"Stats filtered to current calendar year only (Jan 1 - Dec 31). UTC timezone for date boundaries.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:56:11.07858532-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:56:18.828586686-05:00","closed_at":"2026-02-06T21:56:18.828586686-05:00","close_reason":"Completed in Phase 2 (Jan 28, 2026)"}
{"id":"contribemblem-r50","title":"GO-01: Project scaffolding, module init, Makefile, CLI entry","description":"Initialize Go project structure and CLI entry point with subcommand routing.\n\n## Files to create:\n- go.mod (module: github.com/castrojo/contribemblem)\n- go.sum (empty initially)\n- cmd/contribemblem/main.go (CLI entry point)\n- Makefile (build/test/lint targets)\n\n## go.mod content:\n```\nmodule github.com/castrojo/contribemblem\n\ngo 1.23\n\nrequire golang.org/x/image v0.15.0\n```\n\n## cmd/contribemblem/main.go structure:\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n)\n\nfunc main() {\n\tif len(os.Args) \u003c 2 {\n\t\tprintUsage()\n\t\tos.Exit(1)\n\t}\n\n\tcmd := os.Args[1]\n\tswitch cmd {\n\tcase \"fetch-stats\":\n\t\t// Call github.FetchStats() - placeholder for now\n\t\tfmt.Println(\"fetch-stats not yet implemented\")\n\t\tos.Exit(1)\n\tcase \"select-emblem\":\n\t\t// Call emblem.SelectEmblem() - placeholder\n\t\tfmt.Println(\"select-emblem not yet implemented\")\n\t\tos.Exit(1)\n\tcase \"fetch-emblem\":\n\t\t// Call bungie.FetchEmblem() - placeholder\n\t\tfmt.Println(\"fetch-emblem not yet implemented\")\n\t\tos.Exit(1)\n\tcase \"generate\":\n\t\t// Call badge.Generate() - placeholder\n\t\tfmt.Println(\"generate not yet implemented\")\n\t\tos.Exit(1)\n\tcase \"run\":\n\t\t// Orchestrate full pipeline - placeholder\n\t\tfmt.Println(\"run not yet implemented\")\n\t\tos.Exit(1)\n\tcase \"help\", \"--help\", \"-h\":\n\t\tprintUsage()\n\t\tos.Exit(0)\n\tdefault:\n\t\tfmt.Fprintf(os.Stderr, \"Unknown command: %s\\n\", cmd)\n\t\tprintUsage()\n\t\tos.Exit(1)\n\t}\n}\n\nfunc printUsage() {\n\tfmt.Fprintf(os.Stderr, \"Usage: contribemblem \u003ccommand\u003e\\n\\n\")\n\tfmt.Fprintf(os.Stderr, \"Commands:\\n\")\n\tfmt.Fprintf(os.Stderr, \"  fetch-stats      Fetch GitHub stats via GraphQL\\n\")\n\tfmt.Fprintf(os.Stderr, \"  select-emblem    Select weekly emblem hash\\n\")\n\tfmt.Fprintf(os.Stderr, \"  fetch-emblem     Fetch emblem image from Bungie API\\n\")\n\tfmt.Fprintf(os.Stderr, \"  generate         Generate badge image\\n\")\n\tfmt.Fprintf(os.Stderr, \"  run              Run full pipeline\\n\")\n\tfmt.Fprintf(os.Stderr, \"  help             Show this help message\\n\")\n}\n```\n\n## Makefile content:\n```makefile\n.PHONY: build test lint clean\n\nbuild:\n\tgo build -o contribemblem cmd/contribemblem/main.go\n\ntest:\n\tgo test -v ./...\n\nlint:\n\tgo vet ./...\n\ttest -z $(gofmt -l .)\n\nclean:\n\trm -f contribemblem\n```\n\n## Verification:\n```bash\ngo mod tidy\nmake build\n./contribemblem help  # Should print usage\n./contribemblem unknown  # Should exit 1 with error\n```\n\n## Dependencies: None (this task blocks all others)","status":"in_progress","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T22:18:02.167806161-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:49:32.900732703-05:00","dependencies":[{"issue_id":"contribemblem-r50","depends_on_id":"contribemblem-s4f","type":"blocks","created_at":"2026-02-06T22:20:42.333380438-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-rqx","title":"Phase 4: Image Generation with Power Level","description":"Generate PNG with Destiny-styled stat overlay featuring prominent Power Level. 800x400px canvas, node-canvas with Rajdhani font, multi-layer text rendering (shadow+stroke+fill), K/M number formatting. Depends on Phases 2 and 3. Requirements: IMAGE-01 through IMAGE-06.","status":"open","priority":2,"issue_type":"feature","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:55:30.369696988-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:55:30.369696988-05:00","dependencies":[{"issue_id":"contribemblem-rqx","depends_on_id":"contribemblem-s0j","type":"blocks","created_at":"2026-02-06T21:58:01.976727144-05:00","created_by":"Jorge O. Castro"},{"issue_id":"contribemblem-rqx","depends_on_id":"contribemblem-bpy","type":"blocks","created_at":"2026-02-06T21:58:02.696880646-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-s0j","title":"Phase 2: GitHub Stats Collection","description":"Implement GitHub GraphQL API integration to fetch current year statistics. 5 metrics (commits, PRs, issues, reviews, stars), UTC date boundaries, 24hr caching, rate limit monitoring. Requirements: STATS-01 through STATS-05.","status":"closed","priority":2,"issue_type":"feature","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:55:25.193069323-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:55:39.639499672-05:00","closed_at":"2026-02-06T21:55:39.639499672-05:00","close_reason":"Completed Jan 27-28 2026. See .planning/phases/ summaries."}
{"id":"contribemblem-s4f","title":"Go Conversion","description":"Convert ContribEmblem from bash scripts to a single Go binary. Pure Go implementation (no CGo) with stdlib + golang.org/x/image for image generation. Single binary 'contribemblem' with subcommands: fetch-stats, select-emblem, fetch-emblem, generate, run. Includes full test coverage (unit + mock HTTP integration tests). This epic tracks the complete transition from bash/Node.js to Go.","status":"in_progress","priority":2,"issue_type":"feature","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T22:17:49.956833696-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:49:27.290174772-05:00"}
{"id":"contribemblem-smp","title":"GO-07: Update GitHub Actions workflow to use Go binary","description":"Update .github/workflows/update-emblem.yml to build and use the Go binary instead of bash scripts.\n\n## Changes required:\n\n### Remove old steps:\n- Remove 'Fetch GitHub Stats' step (lines 44-51) - replaced by 'contribemblem run'\n- Remove 'Select weekly emblem' step (lines 82-88) - integrated into 'run'\n- Remove 'Fetch emblem from Bungie API' step (lines 90-101) - integrated into 'run'\n\n### Add Go build step (after 'Configure git'):\n```yaml\n      - name: Setup Go\n        uses: actions/setup-go@v5\n        with:\n          go-version: '1.23'\n          cache: true\n\n      - name: Build ContribEmblem\n        run: go build -o contribemblem cmd/contribemblem/main.go\n```\n\n### Replace old orchestration with single run command:\n```yaml\n      - name: Run ContribEmblem pipeline\n        run: ./contribemblem run\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          GITHUB_ACTOR: ${{ github.actor }}\n          BUNGIE_API_KEY: ${{ secrets.BUNGIE_API_KEY }}\n```\n\n### Keep these steps unchanged:\n- Checkout repository\n- Configure git\n- Get current date (for cache keys)\n- Cache GitHub Stats (but update path if needed)\n- Create data directory\n- Log stats status (update to read from data/stats.json)\n- Cache Bungie Manifest\n- Create default emblem config\n- Log emblem status\n- Check for changes\n- Commit and push if changed\n\n### Fix workflow bug (line 121):\nChange:\n```yaml\ngit add emblem.png.tmp\n```\nTo:\n```yaml\ngit add badge.png data/\n```\n\n### Update commit message (line 122):\n```yaml\ngit commit -m \"chore: update badge [skip ci]\"\n```\n\n## Full updated workflow structure (lines 44-124):\n```yaml\n      - name: Setup Go\n        uses: actions/setup-go@v5\n        with:\n          go-version: '1.23'\n          cache: true\n\n      - name: Build ContribEmblem\n        run: go build -o contribemblem cmd/contribemblem/main.go\n\n      - name: Get current date (UTC)\n        id: get-date\n        run: echo \"date=$(date -u +%Y%m%d)\" \u003e\u003e $GITHUB_OUTPUT\n      \n      - name: Cache GitHub Stats\n        id: cache-stats\n        uses: actions/cache@v4\n        with:\n          path: data/stats.json\n          key: github-stats-${{ steps.get-date.outputs.date }}\n          restore-keys: |\n            github-stats-\n\n      - name: Cache Bungie Manifest\n        id: cache-manifest\n        uses: actions/cache@v4\n        with:\n          path: data/manifest.json\n          key: bungie-manifest-${{ steps.get-date.outputs.date }}\n          restore-keys: |\n            bungie-manifest-\n\n      - name: Create data directory\n        run: mkdir -p data\n\n      - name: Create default emblem config\n        run: |\n          if [ ! -f data/emblem-config.json ]; then\n            echo '{\"rotation\":[1409726931,2448092419,3642894792],\"fallback\":1409726931}' \u003e data/emblem-config.json\n            echo \"‚úì Created default emblem config\"\n          else\n            echo \"‚úì Using existing emblem config\"\n          fi\n\n      - name: Run ContribEmblem pipeline\n        run: ./contribemblem run\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          GITHUB_ACTOR: ${{ github.actor }}\n          BUNGIE_API_KEY: ${{ secrets.BUNGIE_API_KEY }}\n\n      - name: Log completion status\n        run: |\n          echo \"‚úì Pipeline completed successfully\"\n          ls -lh badge.png\n          file badge.png\n\n      - name: Check for changes\n        id: changes\n        run: |\n          if git diff --quiet \u0026\u0026 git diff --cached --quiet; then\n            echo \"has_changes=false\" \u003e\u003e $GITHUB_OUTPUT\n          else\n            echo \"has_changes=true\" \u003e\u003e $GITHUB_OUTPUT\n          fi\n      \n      - name: Commit and push if changed\n        if: steps.changes.outputs.has_changes == 'true'\n        run: |\n          git add badge.png data/\n          git commit -m \"chore: update badge [skip ci]\"\n          git push\n```\n\n## Verification:\n```bash\n# Test workflow locally with act (optional)\nact workflow_dispatch\n\n# Or push to branch and test in GitHub Actions\ngit checkout -b test-go-conversion\ngit add .github/workflows/update-emblem.yml\ngit commit -m \"Update workflow to use Go binary\"\ngit push -u origin test-go-conversion\n# Trigger workflow manually in GitHub Actions UI\n```\n\n## Depends on: GO-06","status":"open","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T22:20:24.755882103-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:20:24.755882103-05:00","dependencies":[{"issue_id":"contribemblem-smp","depends_on_id":"contribemblem-s4f","type":"blocks","created_at":"2026-02-06T22:20:42.689662704-05:00","created_by":"Jorge O. Castro"},{"issue_id":"contribemblem-smp","depends_on_id":"contribemblem-cx7","type":"blocks","created_at":"2026-02-06T22:20:44.950368492-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-ss6","title":"FILES-01: Commit generated PNG to repository","description":"Action commits generated PNG (badge.png) to repository with [skip ci] message to prevent loop.","status":"open","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:15.163738145-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:15.163738145-05:00","dependencies":[{"issue_id":"contribemblem-ss6","depends_on_id":"contribemblem-rqx","type":"blocks","created_at":"2026-02-06T21:58:07.345674774-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-u3t","title":"ACTNS-01: Action runs on scheduled trigger (weekly)","description":"Action runs on scheduled trigger (weekly) without manual intervention. Cron trigger for Sunday midnight UTC.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:55:51.082248221-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:55:58.513965783-05:00","closed_at":"2026-02-06T21:55:58.513965783-05:00","close_reason":"Completed in Phase 1 (Jan 27, 2026)"}
{"id":"contribemblem-u54","title":"IMAGE-04: Text contrast with outline/stroke","description":"Text rendered with outline/stroke for contrast on variable backgrounds. Multi-layer rendering: shadow (outer glow) -\u003e stroke (outline) -\u003e fill (main text). Critical: must be implemented from start, retrofitting is visually disruptive.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:56:59.297951122-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T22:27:15.606567864-05:00","closed_at":"2026-02-06T22:27:15.606567864-05:00","close_reason":"Superseded by GO-05 (contribemblem-20q) which incorporates all IMAGE requirements"}
{"id":"contribemblem-uv6","title":"ACTNS-03: Contents write permission for commits","description":"Action has contents:write permission for committing generated images. Explicitly granted at workflow level.","status":"closed","priority":2,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:55:54.309524149-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:55:58.528464458-05:00","closed_at":"2026-02-06T21:55:58.528464458-05:00","close_reason":"Completed in Phase 1 (Jan 27, 2026)"}
{"id":"contribemblem-y9z","title":"CONFG-03: Emblem rotation list in YAML","description":"User can define emblem rotation list in YAML config.","status":"open","priority":3,"issue_type":"task","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:22.842030201-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:22.842030201-05:00","dependencies":[{"issue_id":"contribemblem-y9z","depends_on_id":"contribemblem-dlq","type":"blocks","created_at":"2026-02-06T21:58:09.956446018-05:00","created_by":"Jorge O. Castro"}]}
{"id":"contribemblem-zf2","title":"v2: Organization Filtering","description":"ORGFL-01/02: User can filter stats to specific organizations (e.g. only CNCF contributions). Multiple organization filters supported in config. Deferred to v2.","status":"open","priority":4,"issue_type":"feature","owner":"jorge.castro@gmail.com","created_at":"2026-02-06T21:57:45.157163561-05:00","created_by":"Jorge O. Castro","updated_at":"2026-02-06T21:57:45.157163561-05:00","dependencies":[{"issue_id":"contribemblem-zf2","depends_on_id":"contribemblem-68c","type":"blocks","created_at":"2026-02-06T21:58:11.938576925-05:00","created_by":"Jorge O. Castro"}]}
